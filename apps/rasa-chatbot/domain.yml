version: "3.1"

# ============================================
# INTENTS - Intenciones del usuario
# ============================================
intents:
  # BÃ¡sicos
  - greet
  - goodbye
  - affirm
  - deny
  - thank
  - ask_help
  - bot_challenge
  
  # Ã“rdenes y pedidos
  - ask_orders
  - ask_most_expensive_order
  - check_order_status
  - ask_pending_orders
  - ask_recent_orders
  - cancel_order
  - update_order_status
  - filter_orders
  
  # Clientes
  - ask_customer_info
  - ask_top_customers
  - ask_best_active_customer
  - ask_customer_count
  - search_customer
  
  # Productos
  - ask_products
  - ask_top_products
  - ask_most_sold_product
  - ask_product_stock
  - ask_lowest_stock_product
  
  # Ventas y reportes
  - ask_total_sales
  - ask_revenue
  - ask_sales_by_period
  - ask_abandoned_carts
  
  # Pagos
  - ask_payment_status
  - ask_pending_payments
  - ask_payment_methods
  
  # MÃ©tricas
  - ask_conversion_rate
  - ask_average_order
  - ask_dashboard_summary
  
  # Problemas
  - report_payment_issue
  - report_order_issue
  
  # InformaciÃ³n general
  - ask_business_hours
  - ask_shipping_info

# ============================================
# ENTITIES - Entidades extraÃ­das
# ============================================
entities:
  - order_id
  - order_number
  - order_status
  - payment_status
  - customer_id
  - customer_email
  - customer_name
  - customer_phone
  - product_name
  - time_period

# ============================================
# SLOTS - Variables de conversaciÃ³n
# ============================================
slots:
  order_id:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: order_id
  
  order_number:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: order_number
  
  order_status:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: order_status
  
  payment_status:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: payment_status
  
  customer_id:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: customer_id
  
  customer_email:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: customer_email
  
  customer_name:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: customer_name
  
  customer_phone:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: customer_phone
  
  product_name:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: product_name
  
  time_period:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: time_period

# ============================================
# RESPONSES - Respuestas predefinidas
# ============================================
responses:
  # BÃ¡sicas
  utter_greet:
    - text: "Â¡Hola! Soy tu asistente administrativo. Â¿En quÃ© puedo ayudarte hoy?"
    - text: "Â¡Hola! Estoy aquÃ­ para ayudarte con el dashboard. Â¿QuÃ© necesitas?"
    - text: "Â¡Bienvenido! Â¿QuÃ© informaciÃ³n necesitas sobre tu negocio?"
  
  utter_goodbye:
    - text: "Â¡Hasta luego! Espero haberte ayudado."
    - text: "Â¡Nos vemos! Si necesitas algo mÃ¡s, no dudes en preguntar."
    - text: "Â¡AdiÃ³s! Que tengas un excelente dÃ­a."
  
  utter_you_are_welcome:
    - text: "Â¡De nada! Â¿Necesitas algo mÃ¡s?"
    - text: "Â¡Con gusto! Â¿Algo mÃ¡s en lo que pueda ayudarte?"
    - text: "Â¡Para eso estoy! Â¿Algo mÃ¡s?"
  
  utter_confirmed:
    - text: "âœ… Confirmado. Procediendo con la acciÃ³n."
    - text: "âœ… Entendido. Realizando la operaciÃ³n."
  
  utter_cancelled:
    - text: "âŒ AcciÃ³n cancelada. No se realizarÃ¡n cambios."
    - text: "âŒ OperaciÃ³n cancelada."
  
  utter_help:
    - text: |
        ğŸ“‹ **Puedo ayudarte con:**
        
        ğŸ“¦ **Ã“rdenes:** Ver, buscar, cancelar, actualizar estado
        ğŸ‘¥ **Clientes:** InformaciÃ³n, mejores clientes, bÃºsqueda
        ğŸ›ï¸ **Productos:** CatÃ¡logo, mÃ¡s vendidos, stock
        ğŸ’° **Ventas:** Reportes, ingresos, anÃ¡lisis por perÃ­odo
        ğŸ’³ **Pagos:** Estado, pendientes, mÃ©todos disponibles
        ğŸ“Š **MÃ©tricas:** ConversiÃ³n, ticket promedio, resumen del negocio
        
        Â¿QuÃ© te gustarÃ­a consultar?
  
  utter_iamabot:
    - text: "Soy un asistente virtual creado para ayudarte a gestionar tu negocio. ğŸ¤–"
  
  # Confirmaciones
  utter_ask_confirm_cancel:
    - text: "Â¿EstÃ¡s seguro de que deseas cancelar esta orden? (Responde: sÃ­ o no)"
    - text: "âš ï¸ Â¿Confirmas la cancelaciÃ³n de la orden? Esta acciÃ³n no se puede deshacer."
  
  # MÃ©todos de pago
  utter_payment_methods:
    - text: |
        ğŸ’³ **MÃ©todos de pago disponibles:**
        
        âœ… Tarjetas de crÃ©dito y dÃ©bito (Visa, Mastercard)
        âœ… Culqi (procesador de pagos seguro)
        âœ… Pago online con checkout seguro
        
        Los pagos se procesan de forma segura con encriptaciÃ³n SSL.
  
  # Problemas
  utter_payment_issue_help:
    - text: |
        ğŸ”§ **Para problemas de pago:**
        
        1. Verifica que el estado de la orden en Culqi estÃ© actualizado
        2. Revisa que el webhook de Culqi estÃ© funcionando
        3. Consulta el estado del pago con: "estado de pago de orden ORD-XXXXX"
        4. Si el cliente reporta error, verifica su mÃ©todo de pago
        
        Â¿Necesitas que revise alguna orden especÃ­fica?
  
  utter_order_issue_help:
    - text: |
        ğŸ”§ **Para problemas con Ã³rdenes:**
        
        1. Verifica el estado actual de la orden
        2. Revisa si el cliente completÃ³ el pago
        3. Confirma que los productos estÃ©n disponibles
        4. Puedes cancelar la orden si es necesario
        
        Â¿QuÃ© orden necesitas revisar?
  
  # InformaciÃ³n general
  utter_business_hours:
    - text: |
        ğŸ• **Horarios de atenciÃ³n:**
        
        Lunes a Viernes: 9:00 AM - 6:00 PM
        SÃ¡bados: 10:00 AM - 2:00 PM
        Domingos: Cerrado
        
        Soporte online disponible 24/7 a travÃ©s del dashboard.
  
  utter_shipping_info:
    - text: |
        ğŸ“¦ **InformaciÃ³n de envÃ­os:**
        
        ğŸšš Entregas a domicilio en Lima: 1-2 dÃ­as hÃ¡biles
        ğŸ“ Provincias: 3-5 dÃ­as hÃ¡biles
        ğŸ’° EnvÃ­o gratis en compras mayores a S/. 100
        
        Los clientes pueden rastrear sus pedidos desde el dashboard.
  
  # Fallback
  utter_default:
    - text: "Disculpa, no entendÃ­ eso. Â¿Puedes reformular tu pregunta?"
    - text: "No estoy seguro de entender. Â¿PodrÃ­as ser mÃ¡s especÃ­fico?"
    - text: "Hmm, no reconocÃ­ eso. Prueba con: 'ayuda' para ver quÃ© puedo hacer."

# ============================================
# ACTIONS - Acciones personalizadas
# ============================================
actions:
  # Ã“rdenes
  - action_get_orders
  - action_get_most_expensive_order
  - action_get_order_status
  - action_get_pending_orders
  - action_get_recent_orders
  - action_cancel_order
  - action_update_order_status
  - action_filter_orders
  
  # Clientes
  - action_get_customer_info
  - action_get_top_customers
  - action_get_best_active_customer
  - action_get_customer_count
  - action_search_customer
  
  # Productos
  - action_get_products
  - action_get_top_products
  - action_get_most_sold_product
  - action_get_product_stock
  - action_get_lowest_stock_product
  
  # Ventas
  - action_get_total_sales
  - action_get_revenue
  - action_get_sales_by_period
  - action_get_abandoned_carts
  
  # Pagos
  - action_get_payment_status
  - action_get_pending_payments
  
  # MÃ©tricas
  - action_get_conversion_rate
  - action_get_average_order
  - action_get_dashboard_summary

# ============================================
# SESSION CONFIG
# ============================================
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
